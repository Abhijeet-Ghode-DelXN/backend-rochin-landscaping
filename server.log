[33m[nodemon] 3.1.10[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): *.*[39m
[33m[nodemon] watching extensions: js,mjs,cjs,json[39m
[32m[nodemon] starting `node server.js`[39m
(node:14048) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(Use `node --trace-warnings ...` to show where the warning was created)
(node:14048) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
Server running in production mode on port 5000
MongoDB Connected: ac-q0etrwr-shard-00-00.sfnbxic.mongodb.net
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
--- GLOBAL ERROR HANDLER ---
ErrorResponse: Invalid credentials
    at D:\01-07-2025\backend-rochin-landscaping\src\controllers\auth.controller.js:121:17
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
  statusCode: 401
}
--- END GLOBAL ERROR HANDLER ---
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
--- GLOBAL ERROR HANDLER ---
ErrorResponse: Invalid credentials
    at D:\01-07-2025\backend-rochin-landscaping\src\controllers\auth.controller.js:121:17
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
  statusCode: 401
}
--- END GLOBAL ERROR HANDLER ---
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNjE5NjY4LCJleHAiOjE3NTQyMTE2Njh9.lQhfErQqBJGHf0NMSpXWpyaLlVaRNdxG4Up0L7hMIxE
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNjE5NjY4LCJleHAiOjE3NTQyMTE2Njh9.lQhfErQqBJGHf0NMSpXWpyaLlVaRNdxG4Up0L7hMIxE
Verifying token with secret: Secret exists
Decoded token: {
  id: '6852953fd31bed6c99159cf0',
  role: 'superAdmin',
  iat: 1751619668,
  exp: 1754211668
}
Found user: Yes
User role: superAdmin
Token role: superAdmin
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNjE5NjY4LCJleHAiOjE3NTQyMTE2Njh9.lQhfErQqBJGHf0NMSpXWpyaLlVaRNdxG4Up0L7hMIxE
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNjE5NjY4LCJleHAiOjE3NTQyMTE2Njh9.lQhfErQqBJGHf0NMSpXWpyaLlVaRNdxG4Up0L7hMIxE
Verifying token with secret: Secret exists
Decoded token: {
  id: '6852953fd31bed6c99159cf0',
  role: 'superAdmin',
  iat: 1751619668,
  exp: 1754211668
}
Found user: Yes
User role: superAdmin
Token role: superAdmin
Checking role authorization: { userRole: 'superAdmin', allowedRoles: [ 'superAdmin' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNjE5NjY4LCJleHAiOjE3NTQyMTE2Njh9.lQhfErQqBJGHf0NMSpXWpyaLlVaRNdxG4Up0L7hMIxE
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNjE5NjY4LCJleHAiOjE3NTQyMTE2Njh9.lQhfErQqBJGHf0NMSpXWpyaLlVaRNdxG4Up0L7hMIxE
Verifying token with secret: Secret exists
Decoded token: {
  id: '6852953fd31bed6c99159cf0',
  role: 'superAdmin',
  iat: 1751619668,
  exp: 1754211668
}
Found user: Yes
User role: superAdmin
Token role: superAdmin
Checking role authorization: { userRole: 'superAdmin', allowedRoles: [ 'superAdmin' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNjE5NjY4LCJleHAiOjE3NTQyMTE2Njh9.lQhfErQqBJGHf0NMSpXWpyaLlVaRNdxG4Up0L7hMIxE
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNjE5NjY4LCJleHAiOjE3NTQyMTE2Njh9.lQhfErQqBJGHf0NMSpXWpyaLlVaRNdxG4Up0L7hMIxE
Verifying token with secret: Secret exists
Decoded token: {
  id: '6852953fd31bed6c99159cf0',
  role: 'superAdmin',
  iat: 1751619668,
  exp: 1754211668
}
Found user: Yes
User role: superAdmin
Token role: superAdmin
Checking role authorization: { userRole: 'superAdmin', allowedRoles: [ 'superAdmin' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNjE5NjY4LCJleHAiOjE3NTQyMTE2Njh9.lQhfErQqBJGHf0NMSpXWpyaLlVaRNdxG4Up0L7hMIxE
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNjE5NjY4LCJleHAiOjE3NTQyMTE2Njh9.lQhfErQqBJGHf0NMSpXWpyaLlVaRNdxG4Up0L7hMIxE
Verifying token with secret: Secret exists
Decoded token: {
  id: '6852953fd31bed6c99159cf0',
  role: 'superAdmin',
  iat: 1751619668,
  exp: 1754211668
}
Found user: Yes
User role: superAdmin
Token role: superAdmin
Checking role authorization: { userRole: 'superAdmin', allowedRoles: [ 'superAdmin' ] }

[33m[nodemon] 3.1.10[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): *.*[39m
[33m[nodemon] watching extensions: js,mjs,cjs,json[39m
[32m[nodemon] starting `node server.js`[39m
(node:13296) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(Use `node --trace-warnings ...` to show where the warning was created)
(node:13296) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
Server running in production mode on port 5000
MongoDB Connected: ac-q0etrwr-shard-00-00.sfnbxic.mongodb.net
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNTI1NzUyLCJleHAiOjE3NTQxMTc3NTJ9.i0nyUnnieH3IEf4bbReQo4Vprr84VDIMPOMna-OmDwE
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNTI1NzUyLCJleHAiOjE3NTQxMTc3NTJ9.i0nyUnnieH3IEf4bbReQo4Vprr84VDIMPOMna-OmDwE
Verifying token with secret: Secret exists
Decoded token: {
  id: '6852953fd31bed6c99159cf0',
  role: 'superAdmin',
  iat: 1751525752,
  exp: 1754117752
}
Found user: Yes
User role: superAdmin
Token role: superAdmin
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNTI1NzUyLCJleHAiOjE3NTQxMTc3NTJ9.i0nyUnnieH3IEf4bbReQo4Vprr84VDIMPOMna-OmDwE
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNTI1NzUyLCJleHAiOjE3NTQxMTc3NTJ9.i0nyUnnieH3IEf4bbReQo4Vprr84VDIMPOMna-OmDwE
Verifying token with secret: Secret exists
Decoded token: {
  id: '6852953fd31bed6c99159cf0',
  role: 'superAdmin',
  iat: 1751525752,
  exp: 1754117752
}
Found user: Yes
User role: superAdmin
Token role: superAdmin
Checking role authorization: { userRole: 'superAdmin', allowedRoles: [ 'superAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNTI1NzUyLCJleHAiOjE3NTQxMTc3NTJ9.i0nyUnnieH3IEf4bbReQo4Vprr84VDIMPOMna-OmDwE
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNTI1NzUyLCJleHAiOjE3NTQxMTc3NTJ9.i0nyUnnieH3IEf4bbReQo4Vprr84VDIMPOMna-OmDwE
Verifying token with secret: Secret exists
Decoded token: {
  id: '6852953fd31bed6c99159cf0',
  role: 'superAdmin',
  iat: 1751525752,
  exp: 1754117752
}
Found user: Yes
User role: superAdmin
Token role: superAdmin
Checking role authorization: { userRole: 'superAdmin', allowedRoles: [ 'superAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
--- GLOBAL ERROR HANDLER ---
ErrorResponse: Invalid credentials
    at D:\01-07-2025\backend-rochin-landscaping\src\controllers\auth.controller.js:143:17 {
  statusCode: 401
}
--- END GLOBAL ERROR HANDLER ---
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNTI1Nzk0LCJleHAiOjE3NTQxMTc3OTR9.OdkgEXzeG8vfoYLjRr8j3y_IBaCASxpB0R0BWIEL2mw
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNTI1Nzk0LCJleHAiOjE3NTQxMTc3OTR9.OdkgEXzeG8vfoYLjRr8j3y_IBaCASxpB0R0BWIEL2mw
Verifying token with secret: Secret exists
Decoded token: {
  id: '6852953fd31bed6c99159cf0',
  role: 'superAdmin',
  iat: 1751525794,
  exp: 1754117794
}
Found user: Yes
User role: superAdmin
Token role: superAdmin
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNTI1Nzk0LCJleHAiOjE3NTQxMTc3OTR9.OdkgEXzeG8vfoYLjRr8j3y_IBaCASxpB0R0BWIEL2mw
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNTI1Nzk0LCJleHAiOjE3NTQxMTc3OTR9.OdkgEXzeG8vfoYLjRr8j3y_IBaCASxpB0R0BWIEL2mw
Verifying token with secret: Secret exists
Decoded token: {
  id: '6852953fd31bed6c99159cf0',
  role: 'superAdmin',
  iat: 1751525794,
  exp: 1754117794
}
Found user: Yes
User role: superAdmin
Token role: superAdmin
Checking role authorization: { userRole: 'superAdmin', allowedRoles: [ 'superAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNTI1Nzk0LCJleHAiOjE3NTQxMTc3OTR9.OdkgEXzeG8vfoYLjRr8j3y_IBaCASxpB0R0BWIEL2mw
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNTI1Nzk0LCJleHAiOjE3NTQxMTc3OTR9.OdkgEXzeG8vfoYLjRr8j3y_IBaCASxpB0R0BWIEL2mw
Verifying token with secret: Secret exists
Decoded token: {
  id: '6852953fd31bed6c99159cf0',
  role: 'superAdmin',
  iat: 1751525794,
  exp: 1754117794
}
Found user: Yes
User role: superAdmin
Token role: superAdmin
Checking role authorization: { userRole: 'superAdmin', allowedRoles: [ 'superAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
--- GLOBAL ERROR HANDLER ---
ErrorResponse: Invalid credentials
    at D:\01-07-2025\backend-rochin-landscaping\src\controllers\auth.controller.js:143:17 {
  statusCode: 401
}
--- END GLOBAL ERROR HANDLER ---
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
--- GLOBAL ERROR HANDLER ---
ErrorResponse: Invalid credentials
    at D:\01-07-2025\backend-rochin-landscaping\src\controllers\auth.controller.js:143:17 {
  statusCode: 401
}
--- END GLOBAL ERROR HANDLER ---
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNTI1ODMzLCJleHAiOjE3NTQxMTc4MzN9.TEMjOJkJoNBI-P4mhnn9f-XDmEux0xfbaimmEalXetA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNTI1ODMzLCJleHAiOjE3NTQxMTc4MzN9.TEMjOJkJoNBI-P4mhnn9f-XDmEux0xfbaimmEalXetA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6852953fd31bed6c99159cf0',
  role: 'superAdmin',
  iat: 1751525833,
  exp: 1754117833
}
Found user: Yes
User role: superAdmin
Token role: superAdmin
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNTI1ODMzLCJleHAiOjE3NTQxMTc4MzN9.TEMjOJkJoNBI-P4mhnn9f-XDmEux0xfbaimmEalXetA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNTI1ODMzLCJleHAiOjE3NTQxMTc4MzN9.TEMjOJkJoNBI-P4mhnn9f-XDmEux0xfbaimmEalXetA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6852953fd31bed6c99159cf0',
  role: 'superAdmin',
  iat: 1751525833,
  exp: 1754117833
}
Found user: Yes
User role: superAdmin
Token role: superAdmin
Checking role authorization: { userRole: 'superAdmin', allowedRoles: [ 'superAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNTI1ODMzLCJleHAiOjE3NTQxMTc4MzN9.TEMjOJkJoNBI-P4mhnn9f-XDmEux0xfbaimmEalXetA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNTI1ODMzLCJleHAiOjE3NTQxMTc4MzN9.TEMjOJkJoNBI-P4mhnn9f-XDmEux0xfbaimmEalXetA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6852953fd31bed6c99159cf0',
  role: 'superAdmin',
  iat: 1751525833,
  exp: 1754117833
}
Found user: Yes
User role: superAdmin
Token role: superAdmin
Checking role authorization: { userRole: 'superAdmin', allowedRoles: [ 'superAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
--- GLOBAL ERROR HANDLER ---
ErrorResponse: Invalid credentials
    at D:\01-07-2025\backend-rochin-landscaping\src\controllers\auth.controller.js:121:17
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
  statusCode: 401
}
--- END GLOBAL ERROR HANDLER ---
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
--- GLOBAL ERROR HANDLER ---
ErrorResponse: Invalid credentials
    at D:\01-07-2025\backend-rochin-landscaping\src\controllers\auth.controller.js:143:17 {
  statusCode: 401
}
--- END GLOBAL ERROR HANDLER ---
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
--- GLOBAL ERROR HANDLER ---
ErrorResponse: Invalid credentials
    at D:\01-07-2025\backend-rochin-landscaping\src\controllers\auth.controller.js:143:17 {
  statusCode: 401
}
--- END GLOBAL ERROR HANDLER ---
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNTI2MTEwLCJleHAiOjE3NTQxMTgxMTB9.nyz52N2U4PtjffL3QW1RNW6brsQ0a2AMQjhIjY5JTSo
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNTI2MTEwLCJleHAiOjE3NTQxMTgxMTB9.nyz52N2U4PtjffL3QW1RNW6brsQ0a2AMQjhIjY5JTSo
Verifying token with secret: Secret exists
Decoded token: {
  id: '6852953fd31bed6c99159cf0',
  role: 'superAdmin',
  iat: 1751526110,
  exp: 1754118110
}
Found user: Yes
User role: superAdmin
Token role: superAdmin
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNTI2MTEwLCJleHAiOjE3NTQxMTgxMTB9.nyz52N2U4PtjffL3QW1RNW6brsQ0a2AMQjhIjY5JTSo
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNTI2MTEwLCJleHAiOjE3NTQxMTgxMTB9.nyz52N2U4PtjffL3QW1RNW6brsQ0a2AMQjhIjY5JTSo
Verifying token with secret: Secret exists
Decoded token: {
  id: '6852953fd31bed6c99159cf0',
  role: 'superAdmin',
  iat: 1751526110,
  exp: 1754118110
}
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
(node:3180) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(Use `node --trace-warnings ...` to show where the warning was created)
(node:3180) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
Server running in production mode on port 5000
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNTI2MTEwLCJleHAiOjE3NTQxMTgxMTB9.nyz52N2U4PtjffL3QW1RNW6brsQ0a2AMQjhIjY5JTSo
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNTI2MTEwLCJleHAiOjE3NTQxMTgxMTB9.nyz52N2U4PtjffL3QW1RNW6brsQ0a2AMQjhIjY5JTSo
Verifying token with secret: Secret exists
Decoded token: {
  id: '6852953fd31bed6c99159cf0',
  role: 'superAdmin',
  iat: 1751526110,
  exp: 1754118110
}
MongoDB Connected: ac-q0etrwr-shard-00-01.sfnbxic.mongodb.net
Found user: Yes
User role: superAdmin
Token role: superAdmin
Checking role authorization: { userRole: 'superAdmin', allowedRoles: [ 'superAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNTI2MTEwLCJleHAiOjE3NTQxMTgxMTB9.nyz52N2U4PtjffL3QW1RNW6brsQ0a2AMQjhIjY5JTSo
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTI5NTNmZDMxYmVkNmM5OTE1OWNmMCIsInJvbGUiOiJzdXBlckFkbWluIiwiaWF0IjoxNzUxNTI2MTEwLCJleHAiOjE3NTQxMTgxMTB9.nyz52N2U4PtjffL3QW1RNW6brsQ0a2AMQjhIjY5JTSo
Verifying token with secret: Secret exists
Decoded token: {
  id: '6852953fd31bed6c99159cf0',
  role: 'superAdmin',
  iat: 1751526110,
  exp: 1754118110
}
Found user: Yes
User role: superAdmin
Token role: superAdmin
Checking role authorization: { userRole: 'superAdmin', allowedRoles: [ 'superAdmin' ] }

[33m[nodemon] 3.1.10[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): *.*[39m
[33m[nodemon] watching extensions: js,mjs,cjs,json[39m
[32m[nodemon] starting `node server.js`[39m
(node:9752) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(Use `node --trace-warnings ...` to show where the warning was created)
(node:9752) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
Server running in production mode on port 5000
MongoDB Connected: ac-q0etrwr-shard-00-00.sfnbxic.mongodb.net
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://gildardo-rochin.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://gildardo-rochin.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9'
}
Appointments Route - Method: GET
Appointments Route - Path: /my-appointments
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://gildardo-rochin.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://gildardo-rochin.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"90a-NskBtZNXmt02vxG5pdwMc9Ho8AA"'
}
Appointments Route - Method: GET
Appointments Route - Path: /my-appointments
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  accept: '*/*',
  origin: 'http://gildardo-rochin.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://gildardo-rochin.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9'
}
Appointments Route - Method: GET
Appointments Route - Path: /availability
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'content-length': '143',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  'x-tenant-subdomain': 'gildardo-rochin',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'content-type': 'application/json',
  origin: 'http://gildardo-rochin.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://gildardo-rochin.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9'
}
Appointments Route - Method: POST
Appointments Route - Path: /
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
âœ… Using real Gmail email configuration
ðŸ“§ Message sent: <3ccec42a-7dcb-2373-582e-e70c18b8dfce@gmail.com>
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  accept: '*/*',
  origin: 'http://gildardo-rochin.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://gildardo-rochin.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9'
}
Appointments Route - Method: GET
Appointments Route - Path: /availability
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'content-length': '143',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  'x-tenant-subdomain': 'gildardo-rochin',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'content-type': 'application/json',
  origin: 'http://gildardo-rochin.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://gildardo-rochin.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9'
}
Appointments Route - Method: POST
Appointments Route - Path: /
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
âœ… Using real Gmail email configuration
ðŸ“§ Message sent: <41a63bbe-4a44-fe88-4f33-14f1abc53f23@gmail.com>
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
Found user: Yes
User role: customer
Token role: customer
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
No token found, continuing as unauthenticated
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
No token found, continuing as unauthenticated
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
Found user: Yes
User role: customer
Token role: customer
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
No token found, continuing as unauthenticated
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
No token found, continuing as unauthenticated
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
Found user: Yes
User role: customer
Token role: customer
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Found user: Yes
User role: customer
Token role: customer
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
No token found, continuing as unauthenticated
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
No token found, continuing as unauthenticated
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  accept: '*/*',
  origin: 'http://gildardo-rochin.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://gildardo-rochin.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9'
}
Appointments Route - Method: GET
Appointments Route - Path: /availability
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'content-length': '143',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  'x-tenant-subdomain': 'gildardo-rochin',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'content-type': 'application/json',
  origin: 'http://gildardo-rochin.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://gildardo-rochin.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9'
}
Appointments Route - Method: POST
Appointments Route - Path: /
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
âœ… Using real Gmail email configuration
ðŸ“§ Message sent: <60954e82-7ea7-85a8-7f4c-984d4fab7abc@gmail.com>
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
Found user: Yes
User role: customer
Token role: customer
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Found user: Yes
User role: customer
Token role: customer
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
No token found, continuing as unauthenticated
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Tenant Resolver: headerSubdomain: gildardo-rochin extracted subdomain: gildardo-rochin
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: Tenant found: Gildardo Rochin new ObjectId('6864959dcac90302e939a413')
No token found, continuing as unauthenticated
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://gildardo-rochin.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://gildardo-rochin.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"90a-NskBtZNXmt02vxG5pdwMc9Ho8AA"'
}
Appointments Route - Method: GET
Appointments Route - Path: /my-appointments
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://gildardo-rochin.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://gildardo-rochin.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"1177-pRRShWZTvdhLNPfsSiNX3VGeO/E"'
}
Appointments Route - Method: GET
Appointments Route - Path: /my-appointments
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjdiNmZmYTU0YmMxMmE0ODE2YTE4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7ImxvZ28iOiJodHRwczovL3Jlcy5jbG91ZGluYXJ5LmNvbS9kaDFzZ3NhZjUvaW1hZ2UvdXBsb2FkL3YxNzUxNjg2OTUzL3RlbmFudC1sb2dvcy9lbHIweDd3empud3VjNGQ0am43dy5wbmciLCJ0aW1lem9uZSI6IlVUQyJ9LCJzdWJzY3JpcHRpb24iOnsicGxhbiI6Im1vbnRobHkiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA3LTAyVDAyOjEyOjQ1LjM2OFoifSwiX2lkIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDEzIiwibmFtZSI6IkdpbGRhcmRvIFJvY2hpbiIsInN1YmRvbWFpbiI6ImdpbGRhcmRvLXJvY2hpbiIsIm93bmVyIjoiNjg2NDk1OWRjYWM5MDMwMmU5MzlhNDE1IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMlQwMjoxMjo0NS4zNzFaIiwiX192IjowLCJlbWFpbCI6Imdyb2NoaW4yQGdtYWlsLmNvbSIsImFkZHJlc3MiOiIiLCJwaG9uZSI6IiJ9LCJpYXQiOjE3NTE2OTA0NzAsImV4cCI6MTc1NDI4MjQ3MH0.L-s9lsd3JtTbhRcsbObB3UeCV_W1DRtsinwlDptn8DA
Verifying token with secret: Secret exists
Decoded token: {
  id: '6867b6ffa54bc12a4816a189',
  role: 'customer',
  tenantId: {
    settings: {
      logo: 'https://res.cloudinary.com/dh1sgsaf5/image/upload/v1751686953/tenant-logos/elr0x7wzjnwuc4d4jn7w.png',
      timezone: 'UTC'
    },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-02T02:12:45.368Z'
    },
    _id: '6864959dcac90302e939a413',
    name: 'Gildardo Rochin',
    subdomain: 'gildardo-rochin',
    owner: '6864959dcac90302e939a415',
    createdAt: '2025-07-02T02:12:45.371Z',
    __v: 0,
    email: 'grochin2@gmail.com',
    address: '',
    phone: ''
  },
  iat: 1751690470,
  exp: 1754282470
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
(node:7876) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(Use `node --trace-warnings ...` to show where the warning was created)
(node:7876) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
Server running in production mode on port 5000
MongoDB Connected: ac-q0etrwr-shard-00-00.sfnbxic.mongodb.net
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
(node:11376) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(Use `node --trace-warnings ...` to show where the warning was created)
(node:11376) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
Server running in production mode on port 5000
MongoDB Connected: ac-q0etrwr-shard-00-02.sfnbxic.mongodb.net
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
(node:7204) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(Use `node --trace-warnings ...` to show where the warning was created)
(node:7204) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
Server running in production mode on port 5000
MongoDB Connected: ac-q0etrwr-shard-00-00.sfnbxic.mongodb.net
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
(node:7084) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(Use `node --trace-warnings ...` to show where the warning was created)
(node:7084) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
Server running in production mode on port 5000
MongoDB Connected: ac-q0etrwr-shard-00-01.sfnbxic.mongodb.net

[33m[nodemon] 3.1.10[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): *.*[39m
[33m[nodemon] watching extensions: js,mjs,cjs,json[39m
[32m[nodemon] starting `node server.js`[39m
(node:1124) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(Use `node --trace-warnings ...` to show where the warning was created)
(node:1124) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:1124) [MONGOOSE] Warning: Duplicate schema index on {"customer":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(node:1124) [MONGOOSE] Warning: Duplicate schema index on {"tenants":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
Server running in production mode on port 5000
MongoDB Connected: ac-q0etrwr-shard-00-02.sfnbxic.mongodb.net
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
No token found, continuing as unauthenticated
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
No token found, continuing as unauthenticated
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
No token found, continuing as unauthenticated
üîç Filtering services for tenant: 686371dc6afb07584c866517
üìä Sorting by: -createdAt
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
No token found, continuing as unauthenticated
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
‚úÖ Found 2 services
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
No token found, continuing as unauthenticated
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
No token found, continuing as unauthenticated
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
üîç Filtering services for tenant: 686371dc6afb07584c866517
üìä Sorting by: -createdAt
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
No token found, continuing as unauthenticated
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
‚úÖ Found 2 services
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
No token found, continuing as unauthenticated
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"2735-iVGtg97BoQje/qY73ZA2WohmJtc"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"2735-iVGtg97BoQje/qY73ZA2WohmJtc"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
üîç Filtering services for tenant: 686371dc6afb07584c866517
üìä Sorting by: -createdAt
‚úÖ Found 2 services
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'admin', 'tenantAdmin' ] }
üîç Filtering services for tenant: 686371dc6afb07584c866517
üìä Sorting by: -createdAt
‚úÖ Found 2 services
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'admin', 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"2735-iVGtg97BoQje/qY73ZA2WohmJtc"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"2ad-0aOoNelnJM1t9z6/rK0yRtKuoWk"'
}
Appointments Route - Method: GET
Appointments Route - Path: /calendar
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
üîç Filtering services for tenant: 686371dc6afb07584c866517
üìä Sorting by: -createdAt
‚úÖ Found 2 services
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"2af-rgcuJZsmyLeO1nWVakAyRRIbLjQ"'
}
Appointments Route - Method: GET
Appointments Route - Path: /calendar
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"2735-iVGtg97BoQje/qY73ZA2WohmJtc"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
üîç Filtering services for tenant: 686371dc6afb07584c866517
üìä Sorting by: -createdAt
‚úÖ Found 2 services
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"2735-iVGtg97BoQje/qY73ZA2WohmJtc"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"2af-rgcuJZsmyLeO1nWVakAyRRIbLjQ"'
}
Appointments Route - Method: GET
Appointments Route - Path: /calendar
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
üîç Filtering services for tenant: 686371dc6afb07584c866517
üìä Sorting by: -createdAt
‚úÖ Found 2 services
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"c19-53DV7DYT+0fPIf8LeVpQ0KQs/hA"'
}
Appointments Route - Method: GET
Appointments Route - Path: /68c912cc1e869fecd54799db
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'customer' ]
}
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"c19-53DV7DYT+0fPIf8LeVpQ0KQs/hA"'
}
Appointments Route - Method: GET
Appointments Route - Path: /68c912cc1e869fecd54799db
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'customer' ]
}
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
No token found, continuing as unauthenticated
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
No token found, continuing as unauthenticated
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
No token found, continuing as unauthenticated
üîç Filtering services for tenant: 686371dc6afb07584c866517
üìä Sorting by: -createdAt
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
No token found, continuing as unauthenticated
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
‚úÖ Found 2 services
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
No token found, continuing as unauthenticated
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
No token found, continuing as unauthenticated
üîç Filtering services for tenant: 686371dc6afb07584c866517
üìä Sorting by: -createdAt
‚úÖ Found 2 services
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4YzdlYTNlMTI1NzIwNGU2MGE0ODc1OCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNjIsImV4cCI6MTc2MDYxODE2Mn0.-QcINuFK6G0NMYaNwRWBriKx7a6ExvDd5JPQ3AQD9Z8
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4YzdlYTNlMTI1NzIwNGU2MGE0ODc1OCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNjIsImV4cCI6MTc2MDYxODE2Mn0.-QcINuFK6G0NMYaNwRWBriKx7a6ExvDd5JPQ3AQD9Z8
Verifying token with secret: Secret exists
Decoded token: {
  id: '68c7ea3e1257204e60a48758',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026162,
  exp: 1760618162
}
Found user: Yes
User role: customer
Token role: customer
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4YzdlYTNlMTI1NzIwNGU2MGE0ODc1OCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNjIsImV4cCI6MTc2MDYxODE2Mn0.-QcINuFK6G0NMYaNwRWBriKx7a6ExvDd5JPQ3AQD9Z8',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9'
}
Appointments Route - Method: GET
Appointments Route - Path: /my-appointments
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4YzdlYTNlMTI1NzIwNGU2MGE0ODc1OCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNjIsImV4cCI6MTc2MDYxODE2Mn0.-QcINuFK6G0NMYaNwRWBriKx7a6ExvDd5JPQ3AQD9Z8
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4YzdlYTNlMTI1NzIwNGU2MGE0ODc1OCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNjIsImV4cCI6MTc2MDYxODE2Mn0.-QcINuFK6G0NMYaNwRWBriKx7a6ExvDd5JPQ3AQD9Z8
Verifying token with secret: Secret exists
Decoded token: {
  id: '68c7ea3e1257204e60a48758',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026162,
  exp: 1760618162
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4YzdlYTNlMTI1NzIwNGU2MGE0ODc1OCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNjIsImV4cCI6MTc2MDYxODE2Mn0.-QcINuFK6G0NMYaNwRWBriKx7a6ExvDd5JPQ3AQD9Z8',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"3b5-xXJc8V46DshW6JZEp8YFXOnDouA"'
}
Appointments Route - Method: GET
Appointments Route - Path: /my-appointments
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4YzdlYTNlMTI1NzIwNGU2MGE0ODc1OCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNjIsImV4cCI6MTc2MDYxODE2Mn0.-QcINuFK6G0NMYaNwRWBriKx7a6ExvDd5JPQ3AQD9Z8
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4YzdlYTNlMTI1NzIwNGU2MGE0ODc1OCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNjIsImV4cCI6MTc2MDYxODE2Mn0.-QcINuFK6G0NMYaNwRWBriKx7a6ExvDd5JPQ3AQD9Z8
Verifying token with secret: Secret exists
Decoded token: {
  id: '68c7ea3e1257204e60a48758',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026162,
  exp: 1760618162
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Verifying token with secret: Secret exists
Decoded token: {
  id: '6883260e70d305e207e90389',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026175,
  exp: 1760618175
}
Found user: Yes
User role: customer
Token role: customer
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"3b5-xXJc8V46DshW6JZEp8YFXOnDouA"'
}
Appointments Route - Method: GET
Appointments Route - Path: /my-appointments
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Verifying token with secret: Secret exists
Decoded token: {
  id: '6883260e70d305e207e90389',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026175,
  exp: 1760618175
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"68f-MIfA9gAAl7KrSzp7wbcCEJKew1k"'
}
Appointments Route - Method: GET
Appointments Route - Path: /my-appointments
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Verifying token with secret: Secret exists
Decoded token: {
  id: '6883260e70d305e207e90389',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026175,
  exp: 1760618175
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"2735-iVGtg97BoQje/qY73ZA2WohmJtc"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"2af-rgcuJZsmyLeO1nWVakAyRRIbLjQ"'
}
Appointments Route - Method: GET
Appointments Route - Path: /calendar
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
üîç Filtering services for tenant: 686371dc6afb07584c866517
üìä Sorting by: -createdAt
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"2af-rgcuJZsmyLeO1nWVakAyRRIbLjQ"'
}
Appointments Route - Method: GET
Appointments Route - Path: /calendar
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
‚úÖ Found 2 services
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"2735-iVGtg97BoQje/qY73ZA2WohmJtc"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
üîç Filtering services for tenant: 686371dc6afb07584c866517
üìä Sorting by: -createdAt
‚úÖ Found 2 services
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"2735-iVGtg97BoQje/qY73ZA2WohmJtc"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"2af-rgcuJZsmyLeO1nWVakAyRRIbLjQ"'
}
Appointments Route - Method: GET
Appointments Route - Path: /calendar
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
üîç Filtering services for tenant: 686371dc6afb07584c866517
üìä Sorting by: -createdAt
‚úÖ Found 2 services
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9'
}
Appointments Route - Method: GET
Appointments Route - Path: /68c912cc1e869fecd54799db
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Verifying token with secret: Secret exists
Decoded token: {
  id: '6883260e70d305e207e90389',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026175,
  exp: 1760618175
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'tenantAdmin', 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"c19-53DV7DYT+0fPIf8LeVpQ0KQs/hA"'
}
Appointments Route - Method: GET
Appointments Route - Path: /68c912cc1e869fecd54799db
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Verifying token with secret: Secret exists
Decoded token: {
  id: '6883260e70d305e207e90389',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026175,
  exp: 1760618175
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'tenantAdmin', 'customer' ] }
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"c19-53DV7DYT+0fPIf8LeVpQ0KQs/hA"'
}
Appointments Route - Method: GET
Appointments Route - Path: /68c912cc1e869fecd54799db
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'customer' ]
}
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"c19-53DV7DYT+0fPIf8LeVpQ0KQs/hA"'
}
Appointments Route - Method: GET
Appointments Route - Path: /68c912cc1e869fecd54799db
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'customer' ]
}
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"68f-MIfA9gAAl7KrSzp7wbcCEJKew1k"'
}
Appointments Route - Method: GET
Appointments Route - Path: /my-appointments
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Verifying token with secret: Secret exists
Decoded token: {
  id: '6883260e70d305e207e90389',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026175,
  exp: 1760618175
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"68f-MIfA9gAAl7KrSzp7wbcCEJKew1k"'
}
Appointments Route - Method: GET
Appointments Route - Path: /my-appointments
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Verifying token with secret: Secret exists
Decoded token: {
  id: '6883260e70d305e207e90389',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026175,
  exp: 1760618175
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"2af-rgcuJZsmyLeO1nWVakAyRRIbLjQ"'
}
Appointments Route - Method: GET
Appointments Route - Path: /calendar
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"2735-iVGtg97BoQje/qY73ZA2WohmJtc"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
üîç Filtering services for tenant: 686371dc6afb07584c866517
üìä Sorting by: -createdAt
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"2af-rgcuJZsmyLeO1nWVakAyRRIbLjQ"'
}
Appointments Route - Method: GET
Appointments Route - Path: /calendar
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"2735-iVGtg97BoQje/qY73ZA2WohmJtc"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
‚úÖ Found 2 services
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
üîç Filtering services for tenant: 686371dc6afb07584c866517
üìä Sorting by: -createdAt
‚úÖ Found 2 services
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"2735-iVGtg97BoQje/qY73ZA2WohmJtc"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"2af-rgcuJZsmyLeO1nWVakAyRRIbLjQ"'
}
Appointments Route - Method: GET
Appointments Route - Path: /calendar
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
üîç Filtering services for tenant: 686371dc6afb07584c866517
üìä Sorting by: -createdAt
‚úÖ Found 2 services
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5'
}
Appointments Route - Method: GET
Appointments Route - Path: /68c904040ce4f70b02a56bb8
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'customer' ]
}
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"a2d-DLRMcprduXWRGZ6mxiIaw8iOouY"'
}
Appointments Route - Method: GET
Appointments Route - Path: /68c904040ce4f70b02a56bb8
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'customer' ]
}
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"2735-iVGtg97BoQje/qY73ZA2WohmJtc"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"2af-rgcuJZsmyLeO1nWVakAyRRIbLjQ"'
}
Appointments Route - Method: GET
Appointments Route - Path: /calendar
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
üîç Filtering services for tenant: 686371dc6afb07584c866517
üìä Sorting by: -createdAt
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"2af-rgcuJZsmyLeO1nWVakAyRRIbLjQ"'
}
Appointments Route - Method: GET
Appointments Route - Path: /calendar
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
‚úÖ Found 2 services
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"2735-iVGtg97BoQje/qY73ZA2WohmJtc"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
üîç Filtering services for tenant: 686371dc6afb07584c866517
üìä Sorting by: -createdAt
‚úÖ Found 2 services
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"2735-iVGtg97BoQje/qY73ZA2WohmJtc"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"2af-rgcuJZsmyLeO1nWVakAyRRIbLjQ"'
}
Appointments Route - Method: GET
Appointments Route - Path: /calendar
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
üîç Filtering services for tenant: 686371dc6afb07584c866517
üìä Sorting by: -createdAt
‚úÖ Found 2 services
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"c19-53DV7DYT+0fPIf8LeVpQ0KQs/hA"'
}
Appointments Route - Method: GET
Appointments Route - Path: /68c912cc1e869fecd54799db
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'customer' ]
}
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"c19-53DV7DYT+0fPIf8LeVpQ0KQs/hA"'
}
Appointments Route - Method: GET
Appointments Route - Path: /68c912cc1e869fecd54799db
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'customer' ]
}
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'content-length': '24',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'content-type': 'application/json',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5'
}
Appointments Route - Method: PUT
Appointments Route - Path: /68c912cc1e869fecd54799db
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5'
}
Appointments Route - Method: GET
Appointments Route - Path: /68c912cc1e869fecd54799db
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'customer' ]
}
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'content-length': '0',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5'
}
Appointments Route - Method: PUT
Appointments Route - Path: /68c912cc1e869fecd54799db/complete
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"c1b-dZRXCKlCvyqFgvJTZtdgD2Ewm84"'
}
Appointments Route - Method: GET
Appointments Route - Path: /68c912cc1e869fecd54799db
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'customer' ]
}
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Verifying token with secret: Secret exists
Decoded token: {
  id: '6883260e70d305e207e90389',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026175,
  exp: 1760618175
}
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Found user: Yes
User role: customer
Token role: customer
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"68f-MIfA9gAAl7KrSzp7wbcCEJKew1k"'
}
Appointments Route - Method: GET
Appointments Route - Path: /my-appointments
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Verifying token with secret: Secret exists
Decoded token: {
  id: '6883260e70d305e207e90389',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026175,
  exp: 1760618175
}
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Verifying token with secret: Secret exists
Decoded token: {
  id: '6883260e70d305e207e90389',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026175,
  exp: 1760618175
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Found user: Yes
User role: customer
Token role: customer
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
No token found, continuing as unauthenticated
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"6d5-1h57a+iHSh6GF4XsZ6bydsqFcT4"'
}
Appointments Route - Method: GET
Appointments Route - Path: /my-appointments
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Verifying token with secret: Secret exists
Decoded token: {
  id: '6883260e70d305e207e90389',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026175,
  exp: 1760618175
}
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
No token found, continuing as unauthenticated
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"c19-53DV7DYT+0fPIf8LeVpQ0KQs/hA"'
}
Appointments Route - Method: GET
Appointments Route - Path: /68c912cc1e869fecd54799db
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Verifying token with secret: Secret exists
Decoded token: {
  id: '6883260e70d305e207e90389',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026175,
  exp: 1760618175
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'tenantAdmin', 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"c5f-np1LVmqdmh8pVm4vitd7qICIt4Y"'
}
Appointments Route - Method: GET
Appointments Route - Path: /68c912cc1e869fecd54799db
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Verifying token with secret: Secret exists
Decoded token: {
  id: '6883260e70d305e207e90389',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026175,
  exp: 1760618175
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'tenantAdmin', 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Verifying token with secret: Secret exists
Decoded token: {
  id: '6883260e70d305e207e90389',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026175,
  exp: 1760618175
}
Found user: Yes
User role: customer
Token role: customer
‚úÖ Using real Gmail email configuration
üìß Message sent: <25bd7947-0539-fe1e-ebbe-18f2a8f4f7c5@gmail.com>
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"6d5-1h57a+iHSh6GF4XsZ6bydsqFcT4"'
}
Appointments Route - Method: GET
Appointments Route - Path: /my-appointments
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Verifying token with secret: Secret exists
Decoded token: {
  id: '6883260e70d305e207e90389',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026175,
  exp: 1760618175
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"729-E3DdzFloFLu29mt7gOCfGLs7jvo"'
}
Appointments Route - Method: GET
Appointments Route - Path: /my-appointments
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4ODMyNjBlNzBkMzA1ZTIwN2U5MDM4OSIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYxNzUsImV4cCI6MTc2MDYxODE3NX0.X08sr4BdhWXSJRxC-LiB3IJ2XSAYl7PrkSpsIqgh52I
Verifying token with secret: Secret exists
Decoded token: {
  id: '6883260e70d305e207e90389',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026175,
  exp: 1760618175
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"c5f-np1LVmqdmh8pVm4vitd7qICIt4Y"'
}
Appointments Route - Method: GET
Appointments Route - Path: /68c912cc1e869fecd54799db
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
No token found, continuing as unauthenticated
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'customer' ]
}
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
No token found, continuing as unauthenticated
Tenant Resolver: headerSubdomain: isaac-gomes-ernandes extracted subdomain: isaac-gomes-ernandes
Tenant Resolver: Tenant found: Isaac Gomes Ernandes new ObjectId('686371dc6afb07584c866517')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'isaac-gomes-ernandes',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Chromium";v="140", "Not=A?Brand";v="24", "Google Chrome";v="140"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://isaac-gomes-ernandes.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://isaac-gomes-ernandes.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9,sq;q=0.8,sd;q=0.7,es;q=0.6,bho;q=0.5',
  'if-none-match': 'W/"cb3-xMX2PL3GpBM7xv3FqShcKyeOa2U"'
}
Appointments Route - Method: GET
Appointments Route - Path: /68c912cc1e869fecd54799db
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NjM3MWRkNmFmYjA3NTg0Yzg2NjUxOSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIn0sInN1YnNjcmlwdGlvbiI6eyJwbGFuIjoibW9udGhseSIsInN0YXR1cyI6ImFjdGl2ZSIsInN0YXJ0RGF0ZSI6IjIwMjUtMDctMDFUMDU6Mjc6NTYuOTU3WiJ9LCJfaWQiOiI2ODYzNzFkYzZhZmIwNzU4NGM4NjY1MTciLCJuYW1lIjoiSXNhYWMgR29tZXMgRXJuYW5kZXMiLCJzdWJkb21haW4iOiJpc2FhYy1nb21lcy1lcm5hbmRlcyIsIm93bmVyIjoiNjg2MzcxZGQ2YWZiMDc1ODRjODY2NTE5IiwiY3JlYXRlZEF0IjoiMjAyNS0wNy0wMVQwNToyNzo1Ni45NjFaIiwiX192IjowLCJlbWFpbCI6ImlzYWFjLWdvbWVzLWVybmFuZGVzQGdtYWlsLmNvbSIsImFkZHJlc3MiOiI4ODkzIGVhc3QgOHRoIHN0ICwgcGhvZW5peCBBcml6b25hIiwicGhvbmUiOiIrMSAoNjAyKSA0MjEtNDU5NiJ9LCJpYXQiOjE3NTgwMjYwOTAsImV4cCI6MTc2MDYxODA5MH0.uHcLFlftT2GEAixweiKl8oc8bU6gf0I7C-QWiaGtevI
Verifying token with secret: Secret exists
Decoded token: {
  id: '686371dd6afb07584c866519',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC' },
    subscription: {
      plan: 'monthly',
      status: 'active',
      startDate: '2025-07-01T05:27:56.957Z'
    },
    _id: '686371dc6afb07584c866517',
    name: 'Isaac Gomes Ernandes',
    subdomain: 'isaac-gomes-ernandes',
    owner: '686371dd6afb07584c866519',
    createdAt: '2025-07-01T05:27:56.961Z',
    __v: 0,
    email: 'isaac-gomes-ernandes@gmail.com',
    address: '8893 east 8th st , phoenix Arizona',
    phone: '+1 (602) 421-4596'
  },
  iat: 1758026090,
  exp: 1760618090
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'customer' ]
}

[33m[nodemon] 3.1.10[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): *.*[39m
[33m[nodemon] watching extensions: js,mjs,cjs,json[39m
[32m[nodemon] starting `node server.js`[39m
(node:9004) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(Use `node --trace-warnings ...` to show where the warning was created)
(node:9004) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
Server running in production mode on port 5000
MongoDB Connected: ac-q0etrwr-shard-00-01.sfnbxic.mongodb.net
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
No token found, continuing as unauthenticated
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
No token found, continuing as unauthenticated
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
No token found, continuing as unauthenticated
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
No token found, continuing as unauthenticated
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
--- GLOBAL ERROR HANDLER ---
ErrorResponse: Invalid credentials
    at D:\01-07-2025\backend-rochin-landscaping\src\controllers\auth.controller.js:131:21
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
  statusCode: 401
}
--- END GLOBAL ERROR HANDLER ---
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
--- GLOBAL ERROR HANDLER ---
ErrorResponse: Invalid credentials
    at D:\01-07-2025\backend-rochin-landscaping\src\controllers\auth.controller.js:131:21
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
  statusCode: 401
}
--- END GLOBAL ERROR HANDLER ---
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
No token found, continuing as unauthenticated
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
No token found, continuing as unauthenticated
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
--- GLOBAL ERROR HANDLER ---
ErrorResponse: Invalid credentials
    at D:\01-07-2025\backend-rochin-landscaping\src\controllers\auth.controller.js:131:21
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
  statusCode: 401
}
--- END GLOBAL ERROR HANDLER ---
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
No token found, continuing as unauthenticated
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
No token found, continuing as unauthenticated
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
No token found, continuing as unauthenticated
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
No token found, continuing as unauthenticated
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
No token found, continuing as unauthenticated
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
No token found, continuing as unauthenticated
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'demogardning',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"fcea-ncEWTEI3dAT80KBfr3/jF29aKFU"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'admin' ] }
Role not authorized: tenantAdmin
--- GLOBAL ERROR HANDLER ---
ErrorResponse: User role tenantAdmin is not authorized to access this route
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\auth.js:122:9
    at Layer.handle [as handle_request] (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\layer.js:95:5)
    at trim_prefix (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:328:13)
    at D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:286:9
    at Function.process_params (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:346:12)
    at next (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:280:10)
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\tenantResolver.js:99:3
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\async.js:3:5
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\auth.js:54:13
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
  statusCode: 403
}
--- END GLOBAL ERROR HANDLER ---
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'admin' ] }
Role not authorized: tenantAdmin
--- GLOBAL ERROR HANDLER ---
ErrorResponse: User role tenantAdmin is not authorized to access this route
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\auth.js:122:9
    at Layer.handle [as handle_request] (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\layer.js:95:5)
    at trim_prefix (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:328:13)
    at D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:286:9
    at Function.process_params (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:346:12)
    at next (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:280:10)
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\tenantResolver.js:99:3
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\async.js:3:5
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\auth.js:54:13
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
  statusCode: 403
}
--- END GLOBAL ERROR HANDLER ---
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'demogardning',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"fcea-ncEWTEI3dAT80KBfr3/jF29aKFU"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'demogardning',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9'
}
Appointments Route - Method: GET
Appointments Route - Path: /calendar
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'demogardning',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"fcea-ncEWTEI3dAT80KBfr3/jF29aKFU"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'demogardning',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"41a-mpunKu/XFFXu7iuxeWU/iO30WEM"'
}
Appointments Route - Method: GET
Appointments Route - Path: /calendar
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'demogardning',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"fcea-ncEWTEI3dAT80KBfr3/jF29aKFU"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'demogardning',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"fcea-ncEWTEI3dAT80KBfr3/jF29aKFU"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'demogardning',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"41a-mpunKu/XFFXu7iuxeWU/iO30WEM"'
}
Appointments Route - Method: GET
Appointments Route - Path: /calendar
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
No token found, continuing as unauthenticated
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
No token found, continuing as unauthenticated
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
No token found, continuing as unauthenticated
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
No token found, continuing as unauthenticated
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Cloudinary upload error: {
  error: Error: write ECONNRESET
      at WriteWrap.onWriteComplete [as oncomplete] (node:internal/stream_base_commons:87:19)
      at WriteWrap.callbackTrampoline (node:internal/async_hooks:130:17) {
    errno: -4077,
    code: 'ECONNRESET',
    syscall: 'write'
  }
}
--- GLOBAL ERROR HANDLER ---
ErrorResponse: Error uploading images to Cloudinary
    at D:\01-07-2025\backend-rochin-landscaping\src\controllers\gallery.controller.js:38:19
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
  statusCode: 500
}
--- END GLOBAL ERROR HANDLER ---
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'admin', 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'admin', 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MjcwMSwiZXhwIjoxNzUzOTU0NzAxfQ.yTET9o-hz8pQVxV2xDLm2ZpYJa0tHLUJyB38j0vhbiQ
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751362701,
  exp: 1753954701
}
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Verifying token with secret: Secret exists
Decoded token: {
  id: '685bd62009ecc104d6949ced',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363495,
  exp: 1753955495
}
Found user: Yes
User role: customer
Token role: customer
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9'
}
Appointments Route - Method: GET
Appointments Route - Path: /my-appointments
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Verifying token with secret: Secret exists
Decoded token: {
  id: '685bd62009ecc104d6949ced',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363495,
  exp: 1753955495
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"1914-tAbctyZFX0W5Yl90+IuYSBSzabM"'
}
Appointments Route - Method: GET
Appointments Route - Path: /my-appointments
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Verifying token with secret: Secret exists
Decoded token: {
  id: '685bd62009ecc104d6949ced',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363495,
  exp: 1753955495
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Verifying token with secret: Secret exists
Decoded token: {
  id: '685bd62009ecc104d6949ced',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363495,
  exp: 1753955495
}
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Verifying token with secret: Secret exists
Decoded token: {
  id: '685bd62009ecc104d6949ced',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363495,
  exp: 1753955495
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Verifying token with secret: Secret exists
Decoded token: {
  id: '685bd62009ecc104d6949ced',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363495,
  exp: 1753955495
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Verifying token with secret: Secret exists
Decoded token: {
  id: '685bd62009ecc104d6949ced',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363495,
  exp: 1753955495
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"1914-tAbctyZFX0W5Yl90+IuYSBSzabM"'
}
Appointments Route - Method: GET
Appointments Route - Path: /my-appointments
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Verifying token with secret: Secret exists
Decoded token: {
  id: '685bd62009ecc104d6949ced',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363495,
  exp: 1753955495
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"1914-tAbctyZFX0W5Yl90+IuYSBSzabM"'
}
Appointments Route - Method: GET
Appointments Route - Path: /my-appointments
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Verifying token with secret: Secret exists
Decoded token: {
  id: '685bd62009ecc104d6949ced',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363495,
  exp: 1753955495
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Verifying token with secret: Secret exists
Decoded token: {
  id: '685bd62009ecc104d6949ced',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363495,
  exp: 1753955495
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Verifying token with secret: Secret exists
Decoded token: {
  id: '685bd62009ecc104d6949ced',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363495,
  exp: 1753955495
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Verifying token with secret: Secret exists
Decoded token: {
  id: '685bd62009ecc104d6949ced',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363495,
  exp: 1753955495
}
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Found user: Yes
User role: customer
Token role: customer
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Verifying token with secret: Secret exists
Decoded token: {
  id: '685bd62009ecc104d6949ced',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363495,
  exp: 1753955495
}
Found user: Yes
User role: customer
Token role: customer
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
No token found, continuing as unauthenticated
--- GLOBAL ERROR HANDLER ---
ErrorResponse: Tenant context is required
    at D:\01-07-2025\backend-rochin-landscaping\src\controllers\service.controller.js:80:17
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\async.js:3:5
    at Layer.handle [as handle_request] (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\route.js:149:13)
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\advancedResults.js:96:3
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
  statusCode: 400
}
--- END GLOBAL ERROR HANDLER ---
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
No token found, continuing as unauthenticated
--- GLOBAL ERROR HANDLER ---
ErrorResponse: Tenant context is required
    at D:\01-07-2025\backend-rochin-landscaping\src\controllers\service.controller.js:80:17
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\async.js:3:5
    at Layer.handle [as handle_request] (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\layer.js:95:5)
    at next (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\route.js:149:13)
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\advancedResults.js:96:3
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
  statusCode: 400
}
--- END GLOBAL ERROR HANDLER ---
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  accept: '*/*',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9'
}
Appointments Route - Method: GET
Appointments Route - Path: /availability
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Verifying token with secret: Secret exists
Decoded token: {
  id: '685bd62009ecc104d6949ced',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363495,
  exp: 1753955495
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Verifying token with secret: Secret exists
Decoded token: {
  id: '685bd62009ecc104d6949ced',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363495,
  exp: 1753955495
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Verifying token with secret: Secret exists
Decoded token: {
  id: '685bd62009ecc104d6949ced',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363495,
  exp: 1753955495
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Verifying token with secret: Secret exists
Decoded token: {
  id: '685bd62009ecc104d6949ced',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363495,
  exp: 1753955495
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'content-length': '141',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  'x-tenant-subdomain': 'demogardning',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'content-type': 'application/json',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9'
}
Appointments Route - Method: POST
Appointments Route - Path: /
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Verifying token with secret: Secret exists
Decoded token: {
  id: '685bd62009ecc104d6949ced',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363495,
  exp: 1753955495
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
✅ Using real Gmail email configuration
📧 Message sent: <dd5c3d37-0518-aa81-4ebf-919b56c90004@gmail.com>
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Verifying token with secret: Secret exists
Decoded token: {
  id: '685bd62009ecc104d6949ced',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363495,
  exp: 1753955495
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
✅ Using real Gmail email configuration
📧 Message sent: <a2edc328-ef85-5b21-c5bc-eab82dce3d16@gmail.com>
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Verifying token with secret: Secret exists
Decoded token: {
  id: '685bd62009ecc104d6949ced',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363495,
  exp: 1753955495
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Verifying token with secret: Secret exists
Decoded token: {
  id: '685bd62009ecc104d6949ced',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363495,
  exp: 1753955495
}
Found user: Yes
User role: customer
Token role: customer
Checking role authorization: { userRole: 'customer', allowedRoles: [ 'customer' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Verifying token with secret: Secret exists
Decoded token: {
  id: '685bd62009ecc104d6949ced',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363495,
  exp: 1753955495
}
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Found user: Yes
User role: customer
Token role: customer
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NWJkNjIwMDllY2MxMDRkNjk0OWNlZCIsInJvbGUiOiJjdXN0b21lciIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzQ5NSwiZXhwIjoxNzUzOTU1NDk1fQ.ljgbXirRcvCsrOhUBCjcwhhkzz4WmVLcgvvdoN__UbI
Verifying token with secret: Secret exists
Decoded token: {
  id: '685bd62009ecc104d6949ced',
  role: 'customer',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363495,
  exp: 1753955495
}
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Found user: Yes
User role: customer
Token role: customer
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'demogardning',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"fcea-ncEWTEI3dAT80KBfr3/jF29aKFU"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'admin' ] }
Role not authorized: tenantAdmin
--- GLOBAL ERROR HANDLER ---
ErrorResponse: User role tenantAdmin is not authorized to access this route
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\auth.js:122:9
    at Layer.handle [as handle_request] (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\layer.js:95:5)
    at trim_prefix (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:328:13)
    at D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:286:9
    at Function.process_params (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:346:12)
    at next (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:280:10)
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\tenantResolver.js:99:3
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\async.js:3:5
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\auth.js:54:13
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
  statusCode: 403
}
--- END GLOBAL ERROR HANDLER ---
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'admin' ] }
Role not authorized: tenantAdmin
--- GLOBAL ERROR HANDLER ---
ErrorResponse: User role tenantAdmin is not authorized to access this route
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\auth.js:122:9
    at Layer.handle [as handle_request] (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\layer.js:95:5)
    at trim_prefix (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:328:13)
    at D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:286:9
    at Function.process_params (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:346:12)
    at next (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:280:10)
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\tenantResolver.js:99:3
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\async.js:3:5
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\auth.js:54:13
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
  statusCode: 403
}
--- END GLOBAL ERROR HANDLER ---
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'demogardning',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"10bbb-iRnuDBKMCs+km34Ue1w57kkIkSA"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'demogardning',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"10bbb-iRnuDBKMCs+km34Ue1w57kkIkSA"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'demogardning',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"41a-mpunKu/XFFXu7iuxeWU/iO30WEM"'
}
Appointments Route - Method: GET
Appointments Route - Path: /calendar
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'demogardning',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"41a-mpunKu/XFFXu7iuxeWU/iO30WEM"'
}
Appointments Route - Method: GET
Appointments Route - Path: /calendar
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'demogardning',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"10bbb-iRnuDBKMCs+km34Ue1w57kkIkSA"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'demogardning',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"10bbb-iRnuDBKMCs+km34Ue1w57kkIkSA"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'demogardning',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"41a-mpunKu/XFFXu7iuxeWU/iO30WEM"'
}
Appointments Route - Method: GET
Appointments Route - Path: /calendar
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9'
}
Appointments Route - Method: GET
Appointments Route - Path: /availability
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9'
}
Appointments Route - Method: GET
Appointments Route - Path: /availability
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9'
}
Appointments Route - Method: GET
Appointments Route - Path: /availability
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'content-length': '149',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'content-type': 'application/json',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9'
}
Appointments Route - Method: PUT
Appointments Route - Path: /6863b03bffe69b0725c60c4e
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
✅ Using real Gmail email configuration
📧 Message sent: <223878f7-eb08-d7b5-58da-6815afeac556@gmail.com>
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'content-length': '396900',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'content-type': 'application/json',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9'
}
Appointments Route - Method: POST
Appointments Route - Path: /6863b03bffe69b0725c60c4e/photos
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'content-length': '842271',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'content-type': 'application/json',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9'
}
Appointments Route - Method: POST
Appointments Route - Path: /6863b03bffe69b0725c60c4e/photos
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'content-length': '149',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'content-type': 'application/json',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9'
}
Appointments Route - Method: PUT
Appointments Route - Path: /6863b03bffe69b0725c60c4e
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
✅ Using real Gmail email configuration
📧 Message sent: <733aed2d-8800-c5cd-a0e0-98673dfebb98@gmail.com>
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'demogardning',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"10bbb-iRnuDBKMCs+km34Ue1w57kkIkSA"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'admin' ] }
Role not authorized: tenantAdmin
--- GLOBAL ERROR HANDLER ---
ErrorResponse: User role tenantAdmin is not authorized to access this route
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\auth.js:122:9
    at Layer.handle [as handle_request] (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\layer.js:95:5)
    at trim_prefix (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:328:13)
    at D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:286:9
    at Function.process_params (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:346:12)
    at next (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:280:10)
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\tenantResolver.js:99:3
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\async.js:3:5
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\auth.js:54:13
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
  statusCode: 403
}
--- END GLOBAL ERROR HANDLER ---
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'admin' ] }
Role not authorized: tenantAdmin
--- GLOBAL ERROR HANDLER ---
ErrorResponse: User role tenantAdmin is not authorized to access this route
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\auth.js:122:9
    at Layer.handle [as handle_request] (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\layer.js:95:5)
    at trim_prefix (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:328:13)
    at D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:286:9
    at Function.process_params (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:346:12)
    at next (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:280:10)
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\tenantResolver.js:99:3
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\async.js:3:5
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\auth.js:54:13
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
  statusCode: 403
}
--- END GLOBAL ERROR HANDLER ---
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'demogardning',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"10e53-bsHk1IrpeycvLoHAyoRd7pvaI5E"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'demogardning',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"10e53-bsHk1IrpeycvLoHAyoRd7pvaI5E"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'admin' ] }
Role not authorized: tenantAdmin
--- GLOBAL ERROR HANDLER ---
ErrorResponse: User role tenantAdmin is not authorized to access this route
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\auth.js:122:9
    at Layer.handle [as handle_request] (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\layer.js:95:5)
    at trim_prefix (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:328:13)
    at D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:286:9
    at Function.process_params (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:346:12)
    at next (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:280:10)
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\tenantResolver.js:99:3
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\async.js:3:5
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\auth.js:54:13
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
  statusCode: 403
}
--- END GLOBAL ERROR HANDLER ---
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'admin' ] }
Role not authorized: tenantAdmin
--- GLOBAL ERROR HANDLER ---
ErrorResponse: User role tenantAdmin is not authorized to access this route
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\auth.js:122:9
    at Layer.handle [as handle_request] (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\layer.js:95:5)
    at trim_prefix (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:328:13)
    at D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:286:9
    at Function.process_params (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:346:12)
    at next (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:280:10)
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\tenantResolver.js:99:3
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\async.js:3:5
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\auth.js:54:13
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
  statusCode: 403
}
--- END GLOBAL ERROR HANDLER ---
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'demogardning',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"10e53-bsHk1IrpeycvLoHAyoRd7pvaI5E"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'demogardning',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"10e53-bsHk1IrpeycvLoHAyoRd7pvaI5E"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'admin' ] }
Role not authorized: tenantAdmin
--- GLOBAL ERROR HANDLER ---
ErrorResponse: User role tenantAdmin is not authorized to access this route
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\auth.js:122:9
    at Layer.handle [as handle_request] (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\layer.js:95:5)
    at trim_prefix (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:328:13)
    at D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:286:9
    at Function.process_params (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:346:12)
    at next (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:280:10)
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\tenantResolver.js:99:3
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\async.js:3:5
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\auth.js:54:13
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
  statusCode: 403
}
--- END GLOBAL ERROR HANDLER ---
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'admin' ] }
Role not authorized: tenantAdmin
--- GLOBAL ERROR HANDLER ---
ErrorResponse: User role tenantAdmin is not authorized to access this route
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\auth.js:122:9
    at Layer.handle [as handle_request] (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\layer.js:95:5)
    at trim_prefix (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:328:13)
    at D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:286:9
    at Function.process_params (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:346:12)
    at next (D:\01-07-2025\backend-rochin-landscaping\node_modules\express\lib\router\index.js:280:10)
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\tenantResolver.js:99:3
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\async.js:3:5
    at D:\01-07-2025\backend-rochin-landscaping\src\middlewares\auth.js:54:13
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5) {
  statusCode: 403
}
--- END GLOBAL ERROR HANDLER ---
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Appointments Route - Headers: {
  host: 'localhost:5000',
  connection: 'keep-alive',
  'x-tenant-subdomain': 'demogardning',
  'sec-ch-ua-platform': '"Windows"',
  authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs',
  'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36',
  accept: 'application/json, text/plain, */*',
  'sec-ch-ua': '"Google Chrome";v="137", "Chromium";v="137", "Not/A)Brand";v="24"',
  'sec-ch-ua-mobile': '?0',
  origin: 'http://demogardning.localhost:3000',
  'sec-fetch-site': 'cross-site',
  'sec-fetch-mode': 'cors',
  'sec-fetch-dest': 'empty',
  referer: 'http://demogardning.localhost:3000/',
  'accept-encoding': 'gzip, deflate, br, zstd',
  'accept-language': 'en-US,en;q=0.9',
  'if-none-match': 'W/"10e53-bsHk1IrpeycvLoHAyoRd7pvaI5E"'
}
Appointments Route - Method: GET
Appointments Route - Path: /
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: {
  userRole: 'tenantAdmin',
  allowedRoles: [ 'tenantAdmin', 'professional' ]
}
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: undefined extracted subdomain: null
Auth Headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Token from Authorization header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsInJvbGUiOiJ0ZW5hbnRBZG1pbiIsInRlbmFudElkIjp7InNldHRpbmdzIjp7InRpbWV6b25lIjoiVVRDIiwidGhlbWVDb2xvciI6IiMxMEI5ODEifSwic3Vic2NyaXB0aW9uIjp7InBsYW4iOiJhbm51YWwiLCJzdGF0dXMiOiJhY3RpdmUiLCJzdGFydERhdGUiOiIyMDI1LTA2LTIzVDAwOjAwOjAwLjAwMFoiLCJlbmREYXRlIjoiMjAyNi0wNi0yMlQwMDowMDowMC4wMDBaIn0sIl9pZCI6IjY4NTkxNTk2YWIxYjVjYjZkNzIwYjMzZSIsIm5hbWUiOiJEZW1vR2FyZG5pbmciLCJzdWJkb21haW4iOiJkZW1vZ2FyZG5pbmciLCJvd25lciI6IjY4NTkxNTk3YWIxYjVjYjZkNzIwYjM0MSIsImNyZWF0ZWRBdCI6IjIwMjUtMDYtMjNUMDg6NTE6MzUuMDAwWiIsIl9fdiI6MH0sImlhdCI6MTc1MTM2MzgwMSwiZXhwIjoxNzUzOTU1ODAxfQ.6ltZ9pIZ88KWBCdMSJUJAWRUYy0rpReeQ510sgW4kRs
Verifying token with secret: Secret exists
Decoded token: {
  id: '68591597ab1b5cb6d720b341',
  role: 'tenantAdmin',
  tenantId: {
    settings: { timezone: 'UTC', themeColor: '#10B981' },
    subscription: {
      plan: 'annual',
      status: 'active',
      startDate: '2025-06-23T00:00:00.000Z',
      endDate: '2026-06-22T00:00:00.000Z'
    },
    _id: '68591596ab1b5cb6d720b33e',
    name: 'DemoGardning',
    subdomain: 'demogardning',
    owner: '68591597ab1b5cb6d720b341',
    createdAt: '2025-06-23T08:51:35.000Z',
    __v: 0
  },
  iat: 1751363801,
  exp: 1753955801
}
Found user: Yes
User role: tenantAdmin
Token role: tenantAdmin
Checking role authorization: { userRole: 'tenantAdmin', allowedRoles: [ 'tenantAdmin' ] }
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
Tenant Resolver: headerSubdomain: demogardning extracted subdomain: demogardning
Tenant Resolver: Tenant found: DemoGardning new ObjectId('68591596ab1b5cb6d720b33e')
